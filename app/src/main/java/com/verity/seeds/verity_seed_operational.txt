# VERITY â€“ OPERATIONAL SEED
Inherits from: verity_seed_core.txt
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Phase: 5 â€“ Data, Sync, Testing & Production Prep
Phase Status:
    â€¢ 0 â€“ Reset & Intent âœ…
    â€¢ 1 â€“ Business & Domain Fundamentals âœ…
    â€¢ 2 â€“ Architecture Blueprint âœ…
    â€¢ 3 â€“ UX Laws, Design System & Wireframes âœ…
    â€¢ 4 â€“ Implementation Foundations âœ… (LOCKED)
    â€¢ 5 â€“ Data, Sync, Testing & Production Prep ðŸ”„ ACTIVE (Domain + Module Architecture Locked)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Current Focus:
Domain correctness, data modeling, invariants, migrations, and test enforcement.
UI work is frozen unless directly required by data or correctness.
â€¢ Aggregate boundaries, commandâ†’event flow, and replay architecture are locked.
â€¢ Domain causality, immutability, and projection laws are constitutionally enforced.
â€¢ Performance strategy defined via checkpointed projections (no full replay on navigation).
â€¢ Module identity, namespaces, and build configuration are treated as correctness-critical infrastructure.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Scope:
â€¢ Domain-first design (events, invariants, projections).
â€¢ Local database (Room) as the sole source of truth.
â€¢ Explicit migrations before schema changes.
â€¢ Offline-first sync design (cloud as replication target only).
â€¢ Test-first enforcement of domain invariants.
â€¢ No speculative UI or UX changes.
â€¢ Event Sourcing applied surgically to financial and logistical domain truth only.
â€¢ Projections treated strictly as rebuildable performance caches.
â€¢ Replay-first design with incremental (delta-based) rebuilds for scalability.
â€¢ Version-catalogâ€“driven dependency management (no ad-hoc plugin or library versions).
â€¢ Platform module is the exclusive owner of persistence technologies (Room, KSP).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Current Working Components:
core/domain/
    â”œâ”€ events (Invoice, Payment, Customer lifecycle events)
    â”œâ”€ invariants (ledger, balance, immutability rules)

platform/database/
    â”œâ”€ Room entities & DAOs
    â”œâ”€ Explicit migrations (versioned, tested)
    â”œâ”€ EventEntity (append-only event store)
    â”œâ”€ KSP-backed Room configuration (platform-only)

platform/cloud/
    â”œâ”€ Sync boundaries & replication logic (no UI coupling)

tests/
    â”œâ”€ Domain invariant tests
    â”œâ”€ Ledger rebuild tests
    â”œâ”€ Migration tests

core/replay/
    â”œâ”€ Pure replay engine (events â†’ in-memory state)
    â”œâ”€ Deterministic ledger computation

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Operational Laws (Frozen for Phase 5)
â€¢ Local database is the single source of truth.
â€¢ All state changes occur via append-only domain events.
â€¢ Projections must be fully rebuildable from events.
â€¢ No silent data mutation or in-place edits.
â€¢ Migrations are mandatory and written before schema changes.
â€¢ UI may not compensate for data inconsistency.
â€¢ Cloud sync may lag, replay, or fail without corrupting truth.
â€¢ Commands express intent; only aggregates may emit domain events.
â€¢ Replay explains history; it must never decide or mutate truth.
â€¢ Projection tables may be dropped and rebuilt at any time without data loss.
â€¢ Performance optimizations must not introduce new sources of truth.
â€¢ Build configuration errors are correctness failures, not tooling issues.
â€¢ Room, KSP, and migrations must never appear outside the platform module.
â€¢ Event storage schema changes require migration tests before merge.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Behavioural Laws for the Assistant:
â€¢ Always confirm invariants before proposing data models.
â€¢ No Room entities without migration strategy.
â€¢ No sync logic without failure and replay semantics.
â€¢ Prefer tests and invariants before feature code.
â€¢ Stop immediately if correctness is compromised.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Current Deliverable:
â€¢ EventEntity implemented as append-only Room table (platform-owned).
â€¢ KSP and Room wired via version catalog (no direct plugin IDs).
â€¢ Namespace migration to com.verity completed across modules.
â€¢ Ready to implement EventDao (insert-only) and replay-safe queries.
